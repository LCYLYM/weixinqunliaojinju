明白了！你希望：

- **数据持久化到服务器**，而不是 `localStorage`；
- **多端同步**，即不同设备访问同一页面能看到相同内容；
- **部署在 GitHub Pages** 上（即纯前端 + 免费托管）；
- 保留原有功能：匿名上传、举报隐藏、随机抽取等。

---

## ✅ 技术方案：GitHub + GitHub Pages + GitHub API

我们将用以下方式实现：

| 功能 | 实现方式 |
|------|----------|
| 数据存储 | 将金句数据（JSON）存入 GitHub 仓库的 `quotes.json` 文件中 |
| 上传/举报 | 使用 GitHub API 提交 commit，更新 `quotes.json` |
| 部署 | GitHub Pages 托管前端页面 |
| 多端同步 | 所有用户共享同一个仓库的 `quotes.json` 文件 |

---

## ⚠️ 限制说明（GitHub Pages + API）

- **匿名提交**：GitHub API 需要认证（Token），但我们可以：
  - 使用一个 **公共仓库**；
  - 使用 **GitHub Personal Access Token**（可限制权限）；
  - 将 Token 嵌入前端（⚠️ 有风险，适合低安全场景）；
  - 或者使用 **GitHub Actions + 表单提交**（推荐，安全可控）。

---

## ✅ 推荐方案：GitHub Actions + 表单提交（安全）

### 流程图：

```text
用户上传图片 → 前端压缩 → 提交到 GitHub Actions（通过表单） → Actions 写入 quotes.json → 页面自动刷新
```

---

## ✅ 实现步骤（分三部分）

---

### 🔧 第一步：创建 GitHub 仓库

1. 新建一个仓库，比如 `wechat-quotes-pages`
2. 启用 GitHub Pages（Settings → Pages → Source: GitHub Actions）
3. 创建 `.github/workflows/update-quotes.yml` 文件：

```yaml
# .github/workflows/update-quotes.yml
name: Update Quotes

on:
  workflow_dispatch:
    inputs:
      imageData:
        description: 'Base64 Image Data'
        required: true
      action:
        description: 'Action: add or report'
        required: true
      quoteId:
        description: 'Quote ID (for report)'
        required: false

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Update quotes.json
        run: |
          node .github/scripts/update-quotes.js \
            "${{ github.event.inputs.action }}" \
            "${{ github.event.inputs.imageData }}" \
            "${{ github.event.inputs.quoteId }}"

      - name: Commit and push
        run: |
          git config user.name "github-actions"
          git config user.email "github-actions@github.com"
          git add quotes.json
          git diff --quiet && git diff --staged --quiet || (git commit -m "Update quotes" && git push)
```

---

### 📁 第二步：添加更新脚本

创建 `.github/scripts/update-quotes.js`：

```js
const fs = require('fs');
const path = './quotes.json';

const action = process.argv[2];
const imageData = process.argv[3];
const quoteId = process.argv[4];

let quotes = [];
if (fs.existsSync(path)) {
  quotes = JSON.parse(fs.readFileSync(path, 'utf-8'));
}

if (action === 'add') {
  const newQuote = {
    id: Date.now(),
    image: imageData,
    timestamp: new Date().toISOString(),
    reports: 0,
    hidden: false
  };
  quotes.unshift(newQuote);
} else if (action === 'report') {
  const quote = quotes.find(q => q.id == quoteId);
  if (quote) {
    quote.reports += 1;
    if (quote.reports >= 2) quote.hidden = true;
  }
}

fs.writeFileSync(path, JSON.stringify(quotes, null, 2));
```

---

### 🌐 第三步：前端页面（index.html）

你需要用 JavaScript 调用 GitHub Actions API，触发更新。

#### ✅ 触发 GitHub Actions 的函数（前端）：

```js
const TOKEN = 'YOUR_GITHUB_TOKEN'; // ⚠️ 建议用 GitHub Secrets 隐藏
const REPO = 'YOUR_USERNAME/wechat-quotes-pages';

async function triggerGithubAction(action, imageData = '', quoteId = '') {
  const res = await fetch(`https://api.github.com/repos/${REPO}/actions/workflows/update-quotes.yml/dispatches`, {
    method: 'POST',
    headers: {
      'Authorization': `token ${TOKEN}`,
      'Accept': 'application/vnd.github.v3+json',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      ref: 'main',
      inputs: {
        action: action,
        imageData: imageData,
        quoteId: String(quoteId)
      }
    })
  });

  if (res.ok) {
    showToast('提交成功，正在更新...', 'success');
    setTimeout(() => location.reload(), 3000);
  } else {
    showToast('提交失败，请重试', 'error');
  }
}
```

---

### 📦 第四步：部署到 GitHub Pages

1. 把前端页面 `index.html` 和脚本放入仓库根目录
2. 提交并推送
3. GitHub Pages 会自动部署
4. 访问 `https://YOUR_USERNAME.github.io/wechat-quotes-pages/`

---

## ✅ 最终效果

| 功能 | 状态 |
|------|------|
| 上传金句 | ✅ 压缩后提交到 GitHub |
| 举报隐藏 | ✅ 提交 report 事件 |
| 多端同步 | ✅ 所有人共享 quotes.json |
| 部署 | ✅ GitHub Pages 免费托管 |
| 安全性 | ✅ 用 GitHub Actions 隐藏 Token |

---

## ✅ 下一步

我可以帮你生成完整的模板仓库（HTML + Actions + 脚本），你只需要：

1. 填入 GitHub Token
2. 上传仓库
3. 启用 Pages

---

是否需要我帮你生成这个完整的模板？你可以直接上传使用。